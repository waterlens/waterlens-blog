= xref:.[随记]:（二）
:partition:
:showtitle:
:lang: zh-hans
:stem: latexmath



== 附录：未完工的开发项目

=== mocc

一款基于 tinycc 思路的 C21 编译器，尝试使用 SIMD 技术加速词法分析，尽量实现单趟编译，但由于寄存器分配的问题，可能需要引入中间 IR。

目前进度：前端功能支持。

=== qxq

定位为编程语言编译器综合实验场，尽管最开始使用的是 FP 风格语法并完成了模式匹配器，
但现在目标已经转向无类型语言实现，进而转变为兼具的 JIT 编译器和字节码解释器实验场。

目前进度：代码生成支持

=== regalloc-zoo

用于实验不同寄存器分配算法。为了抽象不同的 ISA 设计了一套专注于描述寄存器读写关系的指令集。
遇到了源汇编转换指令集的困难。

=== wlisp

另一个 lisp 实现。

=== quickaml

原 JIT 技术和解释器技术实验场；现已并入 qxq。

=== tuno

原解释器技术实验场；现已并入 qxq。

== 附录：感兴趣做贡献的项目

=== cranelift

以下记录由 Gemini 生成：

根据会议记录，以下是一些具体且有价值的贡献方向：

1. 为后端添加或完善指令降低 (Instruction Lowering)
    * 描述：将 Cranelift IR 指令转换为特定机器指令的过程。虽然 x64 的 ISLE 迁移已完成，但其他架构（aarch64, s390x,
        riscv64）仍有许多工作可做，特别是 SIMD 和不常用的指令。
    * 切入点：
        - 为 riscv64 后端贡献 SIMD（Vector 扩展）指令的 ISLE 实现。
        - 为 s390x 后端实现对 z17 新指令（如 128 位整数运算）的支持。
        - 实现缺失的 i128 运算（如转换到浮点数）的 libcall 或 ISLE 降低规则。

2. 中端优化规则 (Egraph-based Optimizations)
    * 描述：新的 egraph 优化框架允许通过重写规则来改进代码。社区可以贡献新的规则来提升代码质量。
    * 切入点：
        - 参考 Souper 等工具的输出，或经典的编译器优化理论，为 prelude_opt.isle 添加新的优化规则。
        - 实现对分支指令的优化，例如常量折叠（branch-if-constant）。
        - 为宽整数（如 i128）的运算（如乘法）添加更高效的重写规则。

3. Winch 基线编译器
    * 描述：Winch 是一个追求快速编译的编译器，目前核心功能已完成，但需要支持更多 Wasm 特性。
    * 切入点：
        - 为 Winch 的 x64 或 aarch64 后端实现 SIMD 指令支持。
        - 帮助修复模糊测试发现的 bug，使其完全符合 Wasm 核心规范。

4. 测试与模糊测试 (Fuzzing & Testing)
    * 描述：增强测试覆盖和模糊测试能力对于保证编译器正确性至关重要。
    * 切入点：
        - 修复在 GitHub issue 中标记为 fuzz-bug 的错误。
        - 改进 cranelift-fuzzgen，使其能生成更复杂或更有针对性的测试用例（例如，专门测试边界条件的内存访问）。
        - 为 ISLE 指令选择规则添加覆盖率跟踪，以指导模糊测试。

5. 新汇编器与 ISA 扩展 (New Assembler & ISA Extensions)
    * 描述：x64 后端正在迁移到一个新的、由 DSL 驱动的汇编器。这是一个庞大的工程，需要大量帮助。
    * 切入点：
        - 帮助将剩余的 x64 指令（如条件跳转、CMOVE 等）迁移到新的汇编器框架。
        - 为新汇编器添加对 Intel APX 或 AVX10 扩展的支持。

6. 形式化验证 (Formal Verification)
    * 描述：VeriISLE 项目旨在形式化验证 ISLE 规则的正确性。这是一个更具挑战性的领域，适合有相关背景的贡献者。
    * 切入点：
        - 为 aarch64 或 x86 的浮点和向量指令添加 SAIL 形式化规约。
        - 帮助将 VeriISLE 的注解语言和解析器集成到 Cranelift 主项目中。
